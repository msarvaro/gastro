<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Создание заказа</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../static/css/styles.css">
    <link rel="stylesheet" href="../static/css/create-order.css">
</head>
<body>
    <div class="waiter">
        <div class="orders-status">
            <div class="orders-status__header">
                <button class="back-btn">
                    <img src="../static/images/arrow-left.svg" alt="Назад">
                </button>
                <div class="orders-status__title">Создание заказа</div>
            </div>
            <div class="orders-status__subtitle">
                <button id="selectTableBtn" class="select-table-btn">
                    <span id="selectedTableText">Выберите стол</span>
                    <img src="../static/images/arrow-down.svg" alt="Выбрать" class="select-table-icon">
                </button>
            </div>
        </div>

        <!-- Модальное окно для выбора стола -->
        <div id="tableModal" class="table-modal">
            <div class="table-modal__content">
                <div class="table-modal__header">
                    <h2>Выберите стол</h2>
                    <button class="close-modal-btn">&times;</button>
                </div>
                <div class="table-modal__grid">
                    <!-- Столы будут добавляться динамически -->
                </div>
            </div>
        </div>

        <!-- Модальное окно подтверждения заказа -->
        <div id="confirmOrderModal" class="modal">
            <div class="modal__content">
                <div class="modal__header">
                    <h2>Подтверждение заказа</h2>
                    <button class="close-modal-btn">&times;</button>
                </div>
                <div class="modal__body">
                    <div class="order-summary">
                        <div class="order-summary__table"></div>
                        <div class="order-summary__comment"></div>
                        <div class="order-summary__total"></div>
                    </div>
                </div>
                <div class="modal__footer">
                    <button class="modal-btn modal-btn--secondary" id="cancelOrderBtn">Отменить</button>
                    <button class="modal-btn modal-btn--primary" id="confirmOrderBtn">Подтвердить</button>
                </div>
            </div>
        </div>

        <!-- Уведомление об успешном создании заказа -->
        <div id="successNotification" class="notification">
            <div class="notification__content">
                <img src="../static/images/success.svg" alt="Успешно" class="notification__icon">
                <span>Заказ успешно создан!</span>
            </div>
        </div>

        <div class="content-wrapper">
            <div class="create-order-section">
                <!-- Категории блюд -->
                <div class="categories-scroll">
                    <button class="category-btn active">Все</button>
                    <button class="category-btn">Горячие блюда</button>
                    <button class="category-btn">Салаты</button>
                    <button class="category-btn">Супы</button>
                    <button class="category-btn">Напитки</button>
                </div>

                <!-- Поиск -->
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Поиск блюд...">
                    <img src="../static/images/search.svg" alt="Поиск" class="search-icon">
                </div>

                <!-- Список блюд -->
                <div class="dishes-list">
                    <!-- Блюда будут добавляться динамически -->
                </div>
            </div>

            <!-- Текущий заказ -->
            <div class="current-order">
                <div class="current-order__header">
                    <h2>Текущий заказ</h2>
                    <button class="clear-order-btn" id="clearOrderBtn">
                        <img src="../static/images/delete.svg" alt="Очистить">
                    </button>
                    <span class="current-order__total">0 KZT</span>
                </div>
                <div class="current-order__items">
                    <!-- Сюда будут добавляться выбранные блюда -->
                </div>
                <div class="current-order__comment">
                    <textarea placeholder="Комментарий к заказу..."></textarea>
                </div>
                <button class="create-order-btn">Создать заказ</button>
            </div>
        </div>
    </div>

    <!-- Подключаем скрипты -->
    <script src="../static/js/menu-api.js"></script>
    <script src="../static/js/create-order.js"></script>

    <!-- Добавляем обработчик для кнопки "Назад" -->
    <script>
    const backBtn = document.querySelector('.back-btn');
    backBtn.addEventListener('click', () => {
        // Если есть несохраненные изменения, показываем подтверждение
        if (currentOrderData.items.length > 0) {
            if (confirm('Вы уверены, что хотите вернуться? Несохраненные изменения будут потеряны.')) {
                window.location.href = '/waiter/orders';
            }
        } else {
            window.location.href = '/waiter/orders';
        }
    });
    </script>
</body>
</html>